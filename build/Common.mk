GLOBAL_COMPILE_FLAGS		:= $(GLOBAL_COMPILE_FLAGS) -DBOOST_USER_CONFIG=\<boost_config.h\>
GLOBAL_COMPILE_FLAGS		:= $(GLOBAL_COMPILE_FLAGS) -DFRAMEWORK_USER_CONFIG=\<framework_config.h\>

ROOT_DIRECTORY			:= $(RELETIVE_DIR)/..
ROOT_SOURCE_DIRECTORY		:= $(ROOT_DIRECTORY)/src
ROOT_HEADER_DIRECTORY		:= $(ROOT_DIRECTORY)/include
ROOT_INCLUDE_DIRECTORY		:= $(ROOT_DIRECTORY)/include
ROOT_LIBRARY_DIRECTORY		:= $(ROOT_DIRECTORY)/lib
ROOT_BINARY_DIRECTORY		:= $(ROOT_DIRECTORY)/bin
ROOT_PUBLISH_DIRECTORY		:= $(ROOT_DIRECTORY)/publish
#ROOT_TOOL_DIRECTORY		:= $(ROOT_DIRECTORY)/tools

GLOBAL_INCLUDE_DIRECTORYS	:= base

PLATFORM_DIRECTORY		:= $(patsubst %/,%,$(dir $(RELETIVE_DIR)))

LOCAL_NAME			:= $(patsubst $(shell cd $(PLATFORM_DIRECTORY) ; pwd)%,%,$(shell pwd))

BUILD_DIRECTORY			:= $(shell cd $(RELETIVE_DIR) ; pwd)

ifeq ($(PLATFORM_NAME),)
	PLATFORM_NAME			:= $(notdir $(shell cd $(PLATFORM_DIRECTORY) ; pwd))
endif

PLATFORM_TOOL_DIRECTORY		:= $(ROOT_TOOL_DIRECTORY)/$(PLATFORM_NAME)
        
include $(wildcard $(PLATFORM_DIRECTORY)/make/*.mk)

PLATFORM_TOOL_PATH		:= $(addprefix $(PLATFORM_TOOL_DIRECTORY),$(PLATFORM_TOOL_PATH))
PLATFORM_TOOL_PATH		:= $(foreach path,$(PLATFORM_TOOL_PATH),$(shell cd $(path) ; pwd))
$(foreach path,$(PLATFORM_TOOL_PATH),$(eval PATH:=$(path):$(PATH)))
export PATH

PLATFORM_INCLUDE_DIRECTORYS	:= $(PLATFORM_INCLUDE_DIRECTORYS) $(PLATFORM_DIRECTORY)

ifneq ($(wildcard $(PLATFORM_DIRECTORY)/cex/Makefile),)
	PLATFORM_INCLUDE_DIRECTORYS	:= $(PLATFORM_INCLUDE_DIRECTORYS) $(PLATFORM_DIRECTORY)/cex
        ifneq ($(LOCAL_NAME),/cex)
		PLATFORM_DEPENDS		:= $(PLATFORM_DEPENDS) /cex
        endif
endif

GLOBAL_COMPILE_FLAGS		:= $(GLOBAL_COMPILE_FLAGS) -DPLATFORM_NAME=$(PLATFORM_NAME) -DTOOL_NAME=$(PLATFORM_TOOL_NAME)
GLOBAL_COMPILE_FLAGS		:= $(GLOBAL_COMPILE_FLAGS) -fvisibility=hidden

GLOBAL_LINK_FLAGS		:= $(GLOBAL_LINK_FLAGS) -Wl,--exclude-libs,ALL

RELETIVE_DIR			:= ${RELETIVE_DIR}/allmake$(LOCAL_NAME)

include ${RELETIVE_DIR}/Makefile.in
